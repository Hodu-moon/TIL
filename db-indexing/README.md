# DB 인덱싱

데이터베이스에서 원하는 데이터를 더 빠르게 찾기 위해 사용하는 기술.

## 기본 개념
* 책의 목차랑 비슷
* 책에서 특정 단어를 찾으려면 앞에서부터 한 장 씩 다 읽으면 오래걸린다. 하지만 목차나 색인이 있으면 바로 해당 페이지로 이동할 수 있다.
* DB도 마찬가지로 인덱스가 없으면 테이블의 모든 행을 처음부터 끝까지 확인하는 Full Table Scan이 일어난다.
* 인덱스를 만들면, DB가 정렬된 별도 구조를 유지해서 검색할 때 빨리진다.

## 동작 방식
* 보통 RDBMS(MySQL, PostgresSQL) dptjsms B-Tree기반 인덱스
* 예를들어 회원테이블에 이메일 컬럼에 인덱스를 걸면
* 전체 테이블을 뒤지는게 아니라, 인덱스 트리에서 'abc@naver.com'을 빠르게 찾아서 해당 행을 가져옴

## 장점
* 검색 속도 향상: 특정 조건으로 조회 시 매우 빠르게 찾을 수 있음.
* 정렬 범위 최적화 
* 조인 성능 개선

## 단점
* 저장 공간 사용 : 인덱스를 별도로 저장해야 해서 디스크 공간이 추가로 필요함.
* 쓰기 성능 저하: INSERT, UPDATE, DELETE 때마다 인덱스도 같이 수정해야 하므로 쓰기 성능이 느려질 수 있음
* 너무 많이 걸면 성능 떨어질 수 있음

## 언제 쓰면 좋을까
* 자주 검색 조건에 사용되는 컬럼
* JOIN 조건으로 자주 쓰이는 컬럼
* 정렬이 자주 필요한 컬럼
* 중복이 적은 컬럼

## 정리
DB인덱싱은 데이터를 빠르게 찾기 위해 만들어 놓은 목차 같은것
조회 성능은 좋아지지만 쓰기 작업은 느려질 수 있다는 트레이드 오프가 있음


## 궁금증

1. UNIQE가 아니라 동일한 값이 있을 수 있는 항목에 인덱싱을 걸면 어떻게 될까

-> 중복된 값에 인덱싱을 건다

예를들어 회원 테이블에 성별 ('M','F')

gender 값을 키로 해서 인덱스 트리를 만든다.

* 'M' -> 해당되는 row들의 위치 목록
* 'F' -> 해당되는 row들의 위치 목록

해당 값에 매핑된 여러 row들의 포인터 리스를 가짐

중복도가 너무 높으면 DB 옵티마이저가 판단하에 풀스캔 할 수 도 있음 




