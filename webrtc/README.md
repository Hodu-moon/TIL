# WEBRTC

Web Real-Time Communication

웹에서 실시간으로 소통하기 위한 기술

즉 브라우저끼리 영상 통화, 음성 통화, 파일 전송 같은 걸 할 수 있게 해주는 기술.

Zoom, 구글 미트, 디스코드

# 왜 사용하는가
웹은 요청 -> 응답 구조임

WebRTC는 브라우저끼리 직접 연결 P2P해서 지연이 거의 없는 실시간 소통이 가능

# 동작 방식 (아주 간단 버전)

1. 카메라/마이크 켜기 → getUserMedia()
- 브라우저에서 내 영상·음성을 가져와요.

2. 연결 객체 만들기 → RTCPeerConnection
- 통신할 준비를 해요.

3. 서버를 거쳐 연결 정보 교환 (Signaling)
- “내 IP는 이거야” “내 코덱은 이거야” 같은 걸 서로 알려줘야 해요. (WebSocket 같은 걸로 교환)

4. NAT/방화벽 뚫기 (STUN/TURN 서버)
- 보통 집 인터넷은 공유기 뒤라서 외부에서 바로 못 들어와요. STUN/TURN이 이걸 도와줘요.

5. 실제 연결
- 두 브라우저가 직접 연결돼서 영상/음성/데이터를 주고받아요.

6. 암호화 자동 적용
- 통화는 모두 자동으로 암호화돼서 보안 걱정은 거의 없어요.

# 구성 요소

Signaling 서버: 연결 정보 교환 담당 (직접 구현해야 함, 표준 없음).

STUN 서버: "내 공인 IP 주소 뭐야?" 알려주는 서버.

TURN 서버: 직접 연결이 안 될 때 중계해주는 서버. (안 쓰면 통화가 아예 안 될 수도 있음)

SFU 서버: 여러 명이 통화할 때, 서버가 각자에게 필요한 영상만 전달. (줌 같은 서비스에서 씀)

# 실제로 할 수 있는 것

영상 통화: 줌/구글미트처럼 화상 회의

음성 통화: 디스코드 음성채팅

화면 공유: 내 화면을 바로 보여주기

파일 전송: 브라우저끼리 큰 파일도 빠르게 전송 가능

#  아주 짧은 비유

전화기: 음성만

화상전화: 음성+영상

WebRTC: "브라우저에 내장된 화상전화 기능" → 따로 설치 안 해도 그냥 웹사이트 들어가면 바로 가능!


# websocket이랑 비슷해 보이는데 다른점은?

둘다 실시간 통신을 하지만 목적이 다르다

| 구분          | **WebSocket**                   | **WebRTC**                              |
| ----------- | ------------------------------- | --------------------------------------- |
| **목적**      | 서버 ↔ 클라이언트 간 실시간 데이터 (채팅, 알림 등) | 브라우저 ↔ 브라우저 간 **영상/음성/데이터** 실시간 통신      |
| **연결 방식**   | 항상 서버를 거쳐야 함                    | 가능하면 **P2P 직접 연결** (서버는 신호 교환만)         |
| **데이터 종류**  | **텍스트, 이진 데이터** (주로 채팅, 실시간 알림) | **오디오, 비디오, 데이터 채널** (영상통화, 화상회의)       |
| **전송 프로토콜** | **TCP** (순서/신뢰성 보장)             | **UDP 위주** (지연 ↓) + 필요 시 TCP            |
| **부가 기능**   | 단순 양방향 통신                       | 지연 최소화, 네트워크 품질 적응, 암호화 자동, P2P 최적화     |
| **서버 필요성**  | 항상 필요                           | Signaling·STUN/TURN 서버만 필요, 실제 미디어는 P2P |


### 비유 
WebSocket = 메신저 채팅방
→ 항상 서버를 거쳐서 메시지 주고받음.

WebRTC = 전화 통화
→ 처음 연결할 때만 중앙 교환원 도움 받고, 실제 대화는 직접.
(근데 둘이 바로 연결 안 되면, 교환원이 계속 중계 = TURN 서버)


👉 정리:
WebRTC = 브라우저에 기본 내장된, 실시간 통신(영상·음성·데이터) 기술
→ 서버는 최소한의 도움만 주고, 실제 데이터는 가능한 한 브라우저끼리 직접 주고받는다.

WebSocket 서버가 항상 필요한 카톡 채팅방, WebRTC - 전화 걸때만 서버를 거치는 전화

